class M{constructor({dc:z=void 0,ac:B=void 0,v:G=void 0,xv:F=void 0}){this.dc=z,this.ac=B,this.v=G,this.xv=F}v;xv;dc;ac}class P{static#K=(z)=>new Promise((B)=>{setTimeout(B,z)});static#z=new Map;static#F=!1;static assign=(z)=>{if(P.#G(z),!P.#F)P.#J()};static#G=(z)=>{let{i:B,c:G,d:F}=z;P.#z.set(B,[G,F?F:0])};static#J=async()=>{P.#F=!0;let z=P.#z.keys(),B=z.next();while(!B.done){let G=B.value,F=P.#z.get(G);if(!F)continue;let[J,Y]=F;P.#z.delete(G),await this.#K(Y),await J(),B=z.next()}P.#F=!1}}class Z{static#K;constructor(){if(Z.#K)return Z.#K;Z.#K=this;let z="lvn";this.#z=`${z}:load`,this.#G=`${z}:unload`,this.#J=`${z}:attr-changed`,this.#P=`${z}:view`,this.#W=`${z}:exit-view`,this.#F=`[${z}\\:load],[${z}\\:unload],[${z}\\:attr-changed],[${z}\\:view],[${z}\\:exit-view]`,this.#j()}#z;#F;#G;#J;#P;#W;#B=new WeakMap;#M=(z)=>{if(!(z instanceof HTMLElement))return;this.#Y(z),z.querySelectorAll(this.#F).forEach((B)=>{if(!(B instanceof HTMLElement))return;this.#Y(B)})};#Y=async(z)=>{if(!(z instanceof HTMLElement))return;try{let B=z.getAttribute(this.#G);z.removeAttribute(this.#G);let G=z.getAttribute(this.#J);z.removeAttribute(this.#J);let F=z.getAttribute(this.#P);z.removeAttribute(this.#P);let J=z.getAttribute(this.#W);if(z.removeAttribute(this.#W),(B||G||F||J)&&!this.#B.has(z)){let H=()=>{let W=this.#B.get(z);if(!W)return;W.xv=J?new Function("unObserve","stopExitViewCallback","stopViewCallback",`${J}({element:this,unObserve,stopExitViewCallback,stopViewCallback})`).bind(z,()=>this.#H(z),()=>{let K=this.#B.get(z);if(!K)return;K.xv=void 0,K.v=void 0}):void 0};if(this.#B.set(z,new M({dc:B?()=>{new Function(`${B}(this)`).bind(z)}:void 0,ac:G?(W,K,$)=>new Function("attributeName","newValue","oldValue",`${G}({element:this,attributeName,newValue,oldValue})`).call(z,W,K,$):void 0,v:()=>{if(H(),!F)return;new Function("unObserve","stopViewCallback",`${F}({element:this,unObserve,stopViewCallback})`).call(z,()=>this.#H(z),()=>{let W=this.#B.get(z);if(!W)return;W.v=void 0})}})),F||J)this.#X(z)}let Y=z.getAttribute(this.#z);if(z.removeAttribute(this.#z),!Y)return;new Function(`${Y}(this)`).call(z)}catch(B){console.error(`${this.#z} error:`,B)}};#Z=(z)=>{if(!(z instanceof HTMLElement))return;this.#Q(z);for(let B of z.children)this.#Z(B)};#Q=async(z)=>{try{let B=this.#B.get(z);if(!B||!B.dc)return;this.#B.delete(z),B.dc()}catch(B){console.error(`${this.#G} error:`,B)}};#T=(z,B,G,F)=>{if(!(z instanceof HTMLElement))return;try{let J=this.#B.get(z);if(!J||!J.ac)return;J.ac(B,G,F)}catch(J){console.error(`${this.#J} error:`,J)}};#$=new IntersectionObserver((z)=>{for(let B of z){let G=B.target;if(!(G instanceof HTMLElement))return;let F=this.#B.get(G);if(!F)continue;if(B.isIntersecting&&F.v)F.v();else if(!B.isIntersecting&&F.xv)F.xv()}},{threshold:0});#X(z){this.#$.observe(z)}#H(z){this.#$.unobserve(z)}#j(){document.querySelectorAll(this.#F).forEach((z)=>{this.#Y(z)}),new MutationObserver((z)=>{P.assign({i:z,c:async()=>{for(let{type:B,addedNodes:G,removedNodes:F,attributeName:J,attributeNamespace:Y,oldValue:H,target:W}of z)switch(B){case"childList":if(G.length)G.forEach((K)=>{this.#M(K)});if(F.length)F.forEach((K)=>{this.#Z(K)});break;case"attributes":{let K=W;if(!(K instanceof HTMLElement))continue;let $=J?J:Y?Y:"";this.#T(K,$,K.getAttribute($)??"",H??"")}break}}})}).observe(document,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0})}}new Z;
